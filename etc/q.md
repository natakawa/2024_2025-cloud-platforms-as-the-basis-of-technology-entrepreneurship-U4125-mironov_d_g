## Лабораторная работа № 1  
*«Обзор Google Cloud и исследование основных сервисов»*    

### Базовый уровень  

| # | Вопрос преподавателя | Краткий ответ |
|---|---------------------|---------------|
| 1 | Что такое Google Cloud Platform (GCP)? | Набор управляемых сервисов Google — вычисления, хранение, сети, ИИ — которые берут на себя инфраструктуру, масштабирование и безопасность; вы платите только за использованное. |
| 2 | Зачем нужен сервисный аккаунт (Service Account)? | Это «учётка» не-человека; ей дают минимально-необходимые IAM-роли, чтобы код или VM могли обращаться к ресурсам без паролей. |
| 3 | Что даёт роль **Storage Admin**? | Полный контроль над Cloud Storage: создавать/удалять бакеты и объекты, изменять ACL, просматривать метки. |
| 4 | Чем **Storage Admin** отличается от **Compute Viewer**? | *Storage Admin* управляет объектным хранилищем; *Compute Viewer* только читает метаданные VM-инстансов и дисков — к GCS доступа нет; поэтому копирование «gsutil cp» после смены роли выдаёт *AccessDenied*.  |
| 5 | Что такое Compute Engine? | Это IaaS-сервис: виртуальные машины, диски, сети. |
| 6 | Что значит тип машины **e2-micro**? | Семейство E2 (экономичное) с 2 vCPU долями + 1 ГБ RAM; «micro» — самый малый размер. |
| 7 | Зачем включать режим **Spot VM**? | Цена снижена >60 %; но инстанс могут выключить в любой момент — подходит для непродолжительных, устойчивых к прерыванию задач. |
| 8 | Какая команда gsutil показывает список бакетов? | `gsutil ls` |
| 9 | Как скопировать все файлы из бакета? | `gsutil cp gs://<bucket>/* <локальная-папка>/` |
|10 | Почему мы привязывали сервисный аккаунт к VM при создании? | Чтобы процессы внутри VM автоматически получали описанные в IAM токены — без хранения ключей на диске. |

### Средний уровень  

| # | Вопрос | Ответ |
|---|--------|-------|
|11 | Какие риски у Spot VM? | Отключение без предупреждения (обычно > 30 сEC); не гарантируется устойчивое CPU; нельзя перейти в регулярный тариф без перезапуска. |
|12 | Определите принцип «least privilege». | Каждому субъекту выдают только те права, что нужны прямо сейчас — снижает радиус атаки и ошибки. |
|13 | Как дать сервисному аккаунту только чтение объектов без удаления? | Назначить роль **Storage Object Viewer** на уровне бакета. |
|14 | Что такое «политика IAM» и «binding»? | Политика — JSON-документ ресурса; binding  = одна строка «role + набор principals». |
|15 | Чем GCS отличается от блочного и файлового хранилища? | GCS — объектное: нет модификаций *in-place*, каждое «PUT» — новая версия; блочный — диски, файловый — дерево каталогов и блокировка файлов. |
|16 | Что произойдёт, если удалить сервисный аккаунт до удаления VM? | VM останется, но при перезапуске потеряет доступ к API — логи могут обсыпаться ошибками 401. |
|17 | Когда полезен параллельный режим `gsutil -m`? | При копировании тысяч мелких объектов — параллельно открывает несколько потоков и ускоряет IO. |
|18 | Где хранятся скриншоты, вставленные в отчёт? | В каталоге `../screenshots` репозитория/диска; отчёт лишь ссылается на файлы.  |

### Продвинутый уровень  

| # | Вопрос | Ответ |
|---|--------|-------|
|19 | Опишите процесс подписи URL (Signed URL) и его отличие от изменения ACL. | Signed URL = временный токен, добавленный к URL (HMAC + expiry); доступ ограничен временем и методом, не меняет политику IAM/ACL. |
|20 | Можно ли настроить автоматическое удаление Spot VM по расписанию? | Да: Cloud Scheduler → Cloud Functions → Compute Engine API `instances.delete`; либо установив *preemptible* — удалится максимум через 24 ч. |
|21 | Как подсчитать цену копирования 3 × 6 МБ из бакета в VM? | Внутри региона трафик «intra-GCP» бесплатен, платите за операции «Class A Copy» — $0.005 / 10 000 операций; 3 файла ≈ $0.0000015. |
|22 | Почему `gsutil cp` после смены роли выдаёт 403, а `gsutil ls` на пустой бакет иногда 404? | `cp` требует `storage.objects.get/list`; `ls` без `-r` делает запрос `storage.buckets.get`; если бакет чужой и закрыт, вернётся 404, скрывая существование. |

---

## Лабораторная работа № 2  
*«Исследование Cloud Run»*    

### Базовый уровень  

| # | Вопрос | Ответ |
|---|--------|-------|
| 1 | Что такое Cloud Run? | Serverless-платформа, запускающая контейнеры OCI без управления кластерами; масштабируется 0 ➜ N, оплата - за CPU/память/вызов/сеть по миллисекундам. |
| 2 | Чем Cloud Run отличается от Compute Engine? | Cloud Run не требует VM-администрирования и масштабируется автоматически; Compute Engine — управляемые ВМ с ручным масштабом. |
| 3 | Какой порт используется по умолчанию? | 8080 — Cloud Run подаёт var `PORT=8080` контейнеру. |
| 4 | Какой объём памяти и vCPU вы задали? | 128 МБ и 1 vCPU.  |
| 5 | Что такое «ревизия» (revision)? | Неизменяемая версия службы Cloud Run, создаётся при каждом изменении конфигурации/контейнера. |
| 6 | Определение «cold start». | Время, пока Cloud Run скачивает контейнер и инициализирует процесс, прежде чем обрабатывать первый запрос. |

### Средний уровень  

| # | Вопрос | Ответ |
|---|--------|-------|
| 7 | Как Cloud Run масштабируется при росте трафика? | По счётчику одновременных запросов: если превышает *concurrency* (по умолч. 80), создаёт ещё инстансы; при простое ➜ 0. |
| 8 | Что такое *split traffic* и зачем он нужен? | Деление процентов трафика между ревизиями — A/B-тесты, постепенные выкаты, быстрый откат. |
| 9 | Почему изменение порта требует новую ревизию? | Порт — часть контейнер-spec; Cloud Run хранит это в манифесте, а манифест менять нельзя post-factum. |
|10 | Как просматривать логи Cloud Run? | В консоли → вкладка *Logs Explorer*; либо `gcloud logging read` с фильтром `resource.type="cloud_run_revision"`. |
|11 | Как настроить минимальное число инстансов для снижения холодных стартов? | В параметрах конфигурации указать *Min instances* ≥ 1; контейнер останется «тёплым» всегда (увеличив стоимость). |
|12 | Что такое *CPU throttling* в режиме «CPU always allocated» vs «during request»? | По умолчанию CPU выделяется только, когда идёт HTTP-запрос; «always» держит CPU постоянно — выше цена, быстрее старты. |
|13 | Как задеплоить свой Docker-образ вместо «Hello»? | `gcloud run deploy <name> --image gcr.io/<PROJECT>/<IMAGE> --platform=managed`. |

### Продвинутый уровень  

| # | Вопрос | Ответ |
|---|--------|-------|
|14 | Опишите, как Cloud Run использует Knative под капотом. | Google управляет Knative-Serving: Revision → Configuration; Autoscaler → KPA; Gateway = Envoy + Cloud Load Balancer. |
|15 | Можно ли вызвать Cloud Run из VPC без выхода в интернет? | Да: включив опцию «ingress internal» и создавая Private Service Connect endpoint. |
|16 | Как ограничить максимальное время запроса? | Параметр *Request timeout* (сек) — максимум 60 мин; превышение — 504 Gateway Timeout. |
|17 | Как формируется стоимость Cloud Run за месяц? | Σ(активное время CPU × тариф) + Σ(память) + Σ(запросы × $0.40/млн) + outbound traffic; биллинг помасштабный. |
|18 | Можно ли поднять gRPC-сервис в Cloud Run? | Да: контейнер слушает HTTP/2 на PORT; Cloud Run поддерживает прозрачно. |
|19 | Как аутентифицировать вызовы Cloud Run «снаружи»? | Через IAM + Identity-tokens (JWT Google), либо Cloud Endpoints, либо Cloud IAP. |
|20 | Почему холодный старт вырос до 6–8 мс после смены порта? | Новая ревизия не имеет кэшированного слоя; загрузка образа и инициализация заняли дольше, чем при повторных запросах.  |

---

## Лабораторная работа № 3  
*«Исследование Cloud Storage»*    

### Базовый уровень  

| # | Вопрос | Ответ |
|---|--------|-------|
| 1 | Что такое Cloud Storage bucket? | Корневой контейнер в объектном хранилище Google; в нём лежат объекты с уникальными ключами. |
| 2 | Какое имя бакета вы создали? | `dmironov-bucket`.  |
| 3 | Что означает класс хранения **Standard**? | Для часто-используемых данных; высокая доступность (4 н. девятки) и минимальная плата за операции, но самая высокая за хранение. |
| 4 | Что такое «папка» в GCS? | Логический префикс в имени объекта (`bags/filename.jpg`) — в метаданных реальной иерархии нет. |
| 5 | Какая роль даёт публичный доступ «для всех»? | **Storage Object Viewer** на principal `allUsers`. |
| 6 | Как скопировать объект в другой бакет? | `gsutil cp gs://src-bucket/file gs://dst-bucket/`. |
| 7 | Как удалить бакет из CLI? | `gsutil rb gs://<bucket>`. |

### Средний уровень  

| # | Вопрос | Ответ |
|---|--------|-------|
| 8 | В чём разница между *Location* `us` и `us-central1`? | `us` — мульти-регион (несколько дата-центов по США) — выше цена, выше доступность; `us-central1` — один регион в Айове. |
| 9 | Как настроить жизненный цикл (Lifecycle) для автоматического удаления через 30 дней? | JSON-политика: `"rule":[{"action":{"type":"Delete"},"condition":{"age":30}}]` и `gsutil lifecycle set file.json gs://bucket`. |
|10 | Чем Signed URL отличается от Signed Policy? | Signed URL — только GET/PUT; Policy — форма POST + условия (content-type/size), подпись клиентом для прямой загрузки. |
|11 | Как включить версионирование объектов? | `gsutil versioning set on gs://bucket`; старые версии становятся скрытыми, но доставаемы по generation ID. |
|12 | Какие риски у публичного доступа `allUsers`? | Файл кэшируется CDN; его нельзя отозвать моментально; лёгкая мишень для hot-linking, что увеличит счёт за egress. |
|13 | Что такое *Requester Pays*? | Режим, где стоимость скачивания оплачивает проект того, кто делает запрос (полезно для открытых данных). |

### Продвинутый уровень  

| # | Вопрос | Ответ |
|---|--------|-------|
|14 | Опишите атрибут *Uniform bucket-level access* (UBLA). | Отключает ACL объектов; доступ управляется только IAM на бакете — проще администрирование и аудит. |
|15 | Можно ли шифровать объект своим ключом KMS? | Да: `gsutil cp -k projects/…/cryptoKeys/mykey file gs://bucket`. |
|16 | Чем GCS *Multipart Upload* отличается от S3? | GCS использует «Compose» или *XML multiple uploads*; граница  — 32 компонента/изд. - но «Compose» бесплатен в одном батче. |
|17 | Как мигрировать 100 ТБ данных в GCS без сети? | Заказать Transfer Appliance — зашифрованный NAS-бокс, отправляется физически в DC Google. |
|18 | Почему публичная ссылка имеет домен `storage.googleapis.com`? | Это HTTPS-endpoint с CDN; браузер может кешировать и резолвиться в ближайший POP. |
|19 | Как Cloud Storage реализует согласованность метаданных? | GCS даёт сильную (read-after-write) согласованность для *PUT*/*DELETE* всех объектов с 2017 г. |